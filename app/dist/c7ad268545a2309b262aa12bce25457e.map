{"version":3,"sources":["static/js/routie.js"],"names":["Routie","w","isModule","routes","map","reference","oldReference","Route","path","name","keys","fns","params","regex","pathToRegexp","prototype","addHandler","fn","push","removeHandler","i","c","length","f","splice","run","apply","match","m","exec","len","key","val","decodeURIComponent","toURL","param","replace","indexOf","Error","sensitive","strict","RegExp","Array","join","concat","_","slash","format","capture","optional","s","split","routie","reload","p","navigate","lookup","obj","route","remove","removeAll","options","silent","removeListener","setTimeout","window","location","hash","addListener","noConflict","getHash","substring","checkRoute","hashChanged","addEventListener","attachEvent","removeEventListener","detachEvent","module","exports"],"mappings":"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","file":"c7ad268545a2309b262aa12bce25457e.map","sourcesContent":["/*!\n * routie - a tiny hash router\n * v0.3.2\n * http://projects.jga.me/routie\n * copyright Greg Allen 2016\n * MIT License\n*/\nvar Routie = function(w, isModule) {\n\n    var routes = [];\n    var map = {};\n    var reference = \"routie\";\n    var oldReference = w[reference];\n  \n    var Route = function(path, name) {\n      this.name = name;\n      this.path = path;\n      this.keys = [];\n      this.fns = [];\n      this.params = {};\n      this.regex = pathToRegexp(this.path, this.keys, false, false);\n  \n    };\n  \n    Route.prototype.addHandler = function(fn) {\n      this.fns.push(fn);\n    };\n  \n    Route.prototype.removeHandler = function(fn) {\n      for (var i = 0, c = this.fns.length; i < c; i++) {\n        var f = this.fns[i];\n        if (fn == f) {\n          this.fns.splice(i, 1);\n          return;\n        }\n      }\n    };\n  \n    Route.prototype.run = function(params) {\n      for (var i = 0, c = this.fns.length; i < c; i++) {\n        this.fns[i].apply(this, params);\n      }\n    };\n  \n    Route.prototype.match = function(path, params){\n      var m = this.regex.exec(path);\n  \n      if (!m) return false;\n  \n  \n      for (var i = 1, len = m.length; i < len; ++i) {\n        var key = this.keys[i - 1];\n  \n        var val = ('string' == typeof m[i]) ? decodeURIComponent(m[i]) : m[i];\n  \n        if (key) {\n          this.params[key.name] = val;\n        }\n        params.push(val);\n      }\n  \n      return true;\n    };\n  \n    Route.prototype.toURL = function(params) {\n      var path = this.path;\n      for (var param in params) {\n        path = path.replace('/:'+param, '/'+params[param]);\n      }\n      path = path.replace(/\\/:.*\\?/g, '/').replace(/\\?/g, '');\n      if (path.indexOf(':') != -1) {\n        throw new Error('missing parameters for url: '+path);\n      }\n      return path;\n    };\n  \n    var pathToRegexp = function(path, keys, sensitive, strict) {\n      if (path instanceof RegExp) return path;\n      if (path instanceof Array) path = '(' + path.join('|') + ')';\n      path = path\n        .concat(strict ? '' : '/?')\n        .replace(/\\/\\(/g, '(?:/')\n        .replace(/\\+/g, '__plus__')\n        .replace(/(\\/)?(\\.)?:(\\w+)(?:(\\(.*?\\)))?(\\?)?/g, function(_, slash, format, key, capture, optional){\n          keys.push({ name: key, optional: !! optional });\n          slash = slash || '';\n          return '' + (optional ? '' : slash) + '(?:' + (optional ? slash : '') + (format || '') + (capture || (format && '([^/.]+?)' || '([^/]+?)')) + ')' + (optional || '');\n        })\n        .replace(/([\\/.])/g, '\\\\$1')\n        .replace(/__plus__/g, '(.+)')\n        .replace(/\\*/g, '(.*)');\n      return new RegExp('^' + path + '$', sensitive ? '' : 'i');\n    };\n  \n    var addHandler = function(path, fn) {\n      var s = path.split(' ');\n      var name = (s.length == 2) ? s[0] : null;\n      path = (s.length == 2) ? s[1] : s[0];\n  \n      if (!map[path]) {\n        map[path] = new Route(path, name);\n        routes.push(map[path]);\n      }\n      map[path].addHandler(fn);\n    };\n  \n    var routie = function(path, fn) {\n      if (typeof fn == 'function') {\n        addHandler(path, fn);\n        routie.reload();\n      } else if (typeof path == 'object') {\n        for (var p in path) {\n          addHandler(p, path[p]);\n        }\n        routie.reload();\n      } else if (typeof fn === 'undefined') {\n        routie.navigate(path);\n      }\n    };\n  \n    routie.lookup = function(name, obj) {\n      for (var i = 0, c = routes.length; i < c; i++) {\n        var route = routes[i];\n        if (route.name == name) {\n          return route.toURL(obj);\n        }\n      }\n    };\n  \n    routie.remove = function(path, fn) {\n      var route = map[path];\n      if (!route)\n        return;\n      route.removeHandler(fn);\n    };\n  \n    routie.removeAll = function() {\n      map = {};\n      routes = [];\n    };\n  \n    routie.navigate = function(path, options) {\n      options = options || {};\n      var silent = options.silent || false;\n  \n      if (silent) {\n        removeListener();\n      }\n      setTimeout(function() {\n        window.location.hash = path;\n  \n        if (silent) {\n          setTimeout(function() { \n            addListener();\n          }, 1);\n        }\n  \n      }, 1);\n    };\n  \n    routie.noConflict = function() {\n      w[reference] = oldReference;\n      return routie;\n    };\n  \n    var getHash = function() {\n      return window.location.hash.substring(1);\n    };\n  \n    var checkRoute = function(hash, route) {\n      var params = [];\n      if (route.match(hash, params)) {\n        route.run(params);\n        return true;\n      }\n      return false;\n    };\n  \n    var hashChanged = routie.reload = function() {\n      var hash = getHash();\n      for (var i = 0, c = routes.length; i < c; i++) {\n        var route = routes[i];\n        if (checkRoute(hash, route)) {\n          return;\n        }\n      }\n    };\n  \n    var addListener = function() {\n      if (w.addEventListener) {\n        w.addEventListener('hashchange', hashChanged, false);\n      } else {\n        w.attachEvent('onhashchange', hashChanged);\n      }\n    };\n  \n    var removeListener = function() {\n      if (w.removeEventListener) {\n        w.removeEventListener('hashchange', hashChanged);\n      } else {\n        w.detachEvent('onhashchange', hashChanged);\n      }\n    };\n    addListener();\n  \n    if (isModule){\n      return routie;\n    } else {\n      w[reference] = routie;\n    }\n     \n  };\n  \n  if (typeof module == 'undefined'){\n    Routie(window);\n  } else {\n    module.exports = Routie(window,true);\n  }"]}